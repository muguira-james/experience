<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0", charset='utf-8' />
    <title>Picker</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css"
      integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw=="
      crossorigin=""/>
      <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>

        * {
          box-sizing: border-box;
        }
        .controls::after {
    content: "";
    clear: both;
    display: table;
}



        .map {
          width:75%;
          height: 800px;
          float: left;
          padding: 15px;
        }




    </style>
</head>
<body>
  <script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"
     integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA=="
     crossorigin=""></script>

<h1>Current State</h1><input id="stateindicator"></input>
<div class="w3-card-4">


<div class="w3-container">
<div id='mapid' class="w3-container map"></div>




    <div class="w3-container w3-cell">
      <button id="tlocb" onclick="teeLoc()">Tee Location</button>

      <input id="tloc">

      </input>

      <button onclick="flagloc()">Flag Location</button>
      <input id="flagloc"></input>

      <button onclick="labelloc()">Label Location</button>
      <input id="labelloc" />

      <button onclick="holelayout()">hole layout</button>
      <input id="holelayout" />

      <textarea rows="20" id="outp">result</textarea>
      <button onclick="save()">Save</button>
  </div>


</div>

</div>


  <script>

    var fieldState = "tloc";

    accessToken = 'pk.eyJ1IjoiamFtZXMtbXVndWlyYSIsImEiOiJjajNlazFjOGgwMHA3MzNvZXJqeHYwdmZwIn0.dLuxC5Fai--FHNp3W_FNYw';
    //var mymap = L.map('mapid').setView([51.505, -0.09], 13);
    var mymap = L.map('mapid');
    var centerCoords = [40.65382, -74.69614];
    //console.log(centerCoords);
    mymap.setView(centerCoords, 16);

    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
      attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
      maxZoom: 18,
      //minZoom: 14,
      id: 'mapbox.satellite',
      accessToken: accessToken
    }).addTo(mymap);

    function onMapClick(e) {
      console.log(fieldState);
      if (fieldState != "holelayout") {
        document.getElementById(fieldState).value = '[' + e.latlng.lat + ', ' + e.latlng.lng + ']';
      } else {
        var it = document.getElementById(fieldState).value;
        if (it == "") {
          it = it + '[' + e.latlng.lng + ', ' + e.latlng.lat + "]\n";
        } else {
          it = it + ', [' + e.latlng.lng + ', ' + e.latlng.lat + "]\n";
        }
        document.getElementById(fieldState).value = it;
      }
      //alert("You clicked the map at " + e.latlng);
    }

    mymap.on('click', onMapClick);

    var teeLoc = function() {
      fieldState = "tloc";
      document.getElementById('stateindicator').value = "tloc";

    }
    var flagloc = function() {
      fieldState = "flagloc";
      document.getElementById('stateindicator').value = "flagloc";
    }
    var labelloc = function() {
      fieldState = "labelloc";
      document.getElementById('stateindicator').value = "labelloc";
    }

    var holelayout = function() {
      fieldState = "holelayout";
      document.getElementById('stateindicator').value = "holelayout";
    }

    var save = function() {
      var tlocData = document.getElementById('tloc').value;
      var flocData = document.getElementById('flagloc').value;
      var llocData = document.getElementById('labelloc').value;
      var hlayout = document.getElementById('holelayout').value;

      outp = "\"coordinates\": " + llocData;
      outph = "\"TeeLocation\": " + tlocData + ",\n" + "\"FlagLocation\":" + flocData + ",\n" + "\"labelLocation\":" + llocData + ",\n" + "\"coordinates\": [\n" + hlayout + '\n]';
      console.log(outp, outph);
      document.getElementById('outp').value = outp + "\n" + outph
    }


  </script>

</body>
</html>
